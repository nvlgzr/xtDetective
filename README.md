# xtDetective
A hacky-but-effective way to pinpoint misbehaving Chrome extensions (inspired by `git bisect`)

"Hacky?"

Yep. This whole thing is probably doable as a Chrome Extension, but I wasn't ready to figure out how to do that when I started toying with this idea, and now that I've gotten this far, the hack meets my needs enough that someone else will have to pitch in if the UX is going to improve.

That said, xtDetective has already helped me find two misbehaving extensions in the space of 24 hours, so it definitely works! And, as a bonus, there's nothing to install, so you won't need to worry about xtDetective itself becoming a future problems. ¯\\\_(ツ)_/¯

## Setup

1. Open <a href="https://github.com/nvlgzr/xtDetective/blob/main/output/xtDetective.js">`output/xtDetective.js`</a> & copy the code
2. Visit <a href="chrome://extensions">chrome://extensions</a> in Google Chrome
3. Open dev tools for the resulting page (cmd+J/ctr+J)
4. Paste the copied code into the console

You now have access to the 4 xtDetective bisection commands: start, pass, fail, and reset.

You'll need to repeat these steps any time you refresh the Extensions page.

## Commands

xtDetective's functions aren't _technically pure_, but they do rely on dependency injection to keep things simple and transparent. This comes at a trivial cost: you start by grabbing the model object generated by `start`, then pass that model around as needed.

Don't worry if you didn't understand any of that. You can also just blindly copy/paste the code snippets below and it'll all Just Work™.

One last thing: before you `start`, do a hard refresh on a webpage that's causing you problems and make sure you're able to consistently reproduce the misbehavior that's got you bisecting your extensions in the first place.

### Usage Summary

```javascript
// Generate the starting model, & disable half your enabled extensions
var model = start()

// Update the model and enable some more extensions to test
model = pass(model)

// Update the model and disable some extensions to narrow down the suspects
model = fail(model)

// Reset your extensions to how they were when you `start`ed.
reset(model)
```

## Dev Usage

There's only one dependency at play in this project: TypeScript. If you fork the code and change the TypeScript source (`src/xtDetective.ts`), you'll need to regenerate the JavaScript output (`output/xtDetective.js`):

```
npx tsc src/xtDetective.ts --target esnext --outfile output/xtDetective.js
```